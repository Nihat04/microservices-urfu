## Мониторинг и логирование

### Метрики

**Стек:**
- OpenTelemetry — сбор метрик
- Prometheus — хранение метрик
- Grafana — визуализация

**Сбор метрик:**
Метрики собираются через OpenTelemetry с инструментацией ASP.NET Core. Микросервисы экспортируют метрики в формате Prometheus через endpoint `/metrics`. Prometheus периодически собирает метрики со всех микросервисов и хранит их в своей базе данных.

**Визуализация:**
Визуализация метрик выполняется в Grafana через подключенный datasource Prometheus и подключенный дашборд.

### Логи

**Стек:**
- Serilog — логирование в приложении
- Vector — сбор и предобработка логов
- Loki — хранение логов
- Grafana — визуализация

**Сбор логов:**
Логи собираются через Serilog, который выводит их в консоль в формате JSON с обогащением (добавляется имя сервиса). Vector собирает логи из Docker-контейнеров, парсит JSON-сообщения и отправляет их в Loki с метками (service, level).

**Предобработка:**
Vector выполняет парсинг JSON-логов из контейнеров и добавляет метки для последующей фильтрации и поиска в Loki.

**Визуализация:**
Визуализация логов выполняется в Grafana через подключенный datasource Loki.
